/*
 * CTRL.c
 *
 *  Created on: Nov 18, 2023
 *      Author: AhmedAbogabl
 */

//include uart

#include "CTRL.h"
#include "../../utils/STD_TYPES.h"
#include "../../MCAL/UART/includes/UART_interface.h"


//init BL com baud rate 9600 default
void BTCTRL_Init(void)
{
	UART_Init();

//	 UART_TransmitString("\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n");
	 UART_TransmitString("\r\n 'F' --> Forward:\r\n");
	 UART_TransmitString(" 'R' --> Reverse:\r\n");
	 UART_TransmitString(" 'N' --> Neutral \r\n\r\n");

	 UART_TransmitString(" (0-9) --> LEFT - RIGHT \r\n");
	 UART_TransmitString(" [1-4] --> SPEED OPTIONS \r\n");
	 UART_TransmitString(" 5 TO ACTIVATE LANE ASSISTANCE\r\n");
}

u8 BTCTRL_Receive(void)
{
	return UART_Receive();
}

void BTCTRL_Send(u8 data)
{
	UART_Send(data);
}

u32 BTCTRL_ReceiveNumber()
{
	return UART_ReceiveNumber();
}


void BTCTRL_TransmitString(const u8* str)
{
	UART_TransmitString(str);
}

//u8 user[4];
// UART_TransmitString("\r\n Enter user id to edit (1-20):");
// user[0] = (u8)UART_Receive();
// UART_TransmitString("\r\n Enter NEW password(****):");
// user[1] = (u8)UART_Receive();
// user[2] = (u8)UART_Receive();
// user[3] = (u8)UART_Receive();
//
//
//   while (1) {
//       UART_TransmitString("ENTER PASSWORD:");
//       admin = UART_ReceiveNumber();
//
//       if (admin == ADMIN_PASSWORD) {
//           access = 1;
//           break;
//       } else {
//           access = 0;
//       }
//
//       if (trials == 3) {
//           access = 0;
//           break;
//       }
//       trials++;
//   }
//
//   if (access) {
//       while (1) {
//           UART_TransmitString("\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n");
//           UART_TransmitString("\r\n 1 FOR ADDING NEW USER:\r\n");
//           UART_TransmitString(" 2 FOR DELETING A USER:\r\n");
//           UART_TransmitString(" 3 FOR EDITING A USER \r\n");
//           UART_TransmitString(" 4 ACCEPT USERS\r\n");
//
//           if (tryAgain_flag == 1) {
//               RunForUsers();
//           } else {
//               Users_Pick = UART_ReceiveNumber();
//               Handle_user(Users_Pick);
//           }
//       }
//   } else {
//       // Lock the system if out of trials
//       UART_TransmitString("CLS\r\n");
//       UART_TransmitString("\r\n OUT OF TRIALS :\r\n");
//       UART_TransmitString("\r\n SYSTEM LOCKED :\r\n");
//
//       Dio_WriteChannel(BUZZ, STD_HIGH);
//       Dio_WriteChannel(RED_LED, STD_HIGH);
//       exit(1);
//   }
//
//   return 0;
//}
